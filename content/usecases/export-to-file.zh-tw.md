---
title: 改善資料落檔作業的問題
---

資料庫系統的資料交換一直是企業的痛，不管是跨部門、跨系統還是橫跨企業組織，有太多的問題、風險和潛在成本存在，於是大多數人最終還是選擇用最原始的資料交換媒介「檔案」。這在業界普遍被稱作「落檔作業」，其作法就是將外部系統所需要的資料，定期從資料庫爬出來後，放置在一個雙方系統能共同存取的儲存空間。然後外部系統就會定期來將檔案搬回自家環境，把檔案內容解開寫入到本地資料庫內，接著再進行各種資料的處裡工作，

這樣的做法看起來原始笨拙，但卻解決了一些重要的問題，並以下列為前提實現資料交換的工作：

1. 無需讓外部系統直接接觸內部資料庫
2. 可以避免外部而來的大量查詢直接衝擊資料庫
3. 可以控制批次爬資料庫的時間，盡量避免影響正常業務執行
4. 資料庫系統管理人可以一定程度管控資料進出
5. 無需冒著系統不安全性、不穩定性的風險來提供資料

---

## 資料落檔作業的缺點

然而，資料落檔作業其實是種實務上的妥協，並不是理想的做法。這種作法往往帶來許多系統的限制，甚至在資料量大時仍然無法避免既有資料庫系統壓力，更多時候是以傷害使用者體驗、捨去需求之下的堪用做法。

1. 資料非常不即時
2. 每次落檔作業的時間很能很長
3. 落檔作業執行時會造成資料庫系統巨大壓力，影響正常業務運行
4. 需要資料的外部系統越多，對系統影響越大
5. 每次不同需求，都需要開發客製化落檔作業程式
5. 每次都需要資料庫系統原負責團隊協助開發
6. 需要大量跨團隊溝通、制定資料交換格式和方法
7. 每次跨系統介接都需要花大量討論和規劃開發的時間

基於上述種種原因，大多數系統負責團隊，多數時候不願意提供資料給外部系統，以免帶來不必要的額外麻煩。也因為資料交換成本高，也不利於大規模的系統介接和整合，更不利於應用的發展。

---

## 如何以 GRAVITY 進行改善？

GRAVITY 能提供更好的方法，實現跨系統的資料交換。做法上，建立資料代理節點來即時監聽資料庫變更事件，並對資料內容進行快取，為原始資料庫進行隔離保護，確保外部系統都不會碰觸到原始資料庫系統。而外部系統全部以統一的方式，在代理節點上對所需的資料進行訂閱，一旦訂閱成功，資料會即時的推送給外部系統，甚至直接寫入外部希望落地的資料庫。

這過程中，對於原始資料庫而言完全沒有任何壓力，只有在資料變更時拋出事件僅僅如此而已，無論外部訂閱者再多，也不會傷及原始資料庫的效能表現。由於外部系統被隔離在資料代理節點之外，不會直接碰觸到原始資料庫，更沒有安全性的疑慮。此外，沒有任何額外的溝通、開發工作，完全只需要安裝部署 GRAVITY 訂閱管線而已，大幅度減少跨團隊溝通、協同作業、客製化程式的時間。對應用而言，新的資料可以近乎即時取得，以便更快地進行各種作業。

導入 GRAVITY 後，除了可以保持資料落檔作業的優點，也能避免其缺點。
